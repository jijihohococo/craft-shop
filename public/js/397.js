"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[397],{681:(e,t,a)=>{a.d(t,{Lf:()=>v,Mg:()=>c,OT:()=>h,P9:()=>w,PD:()=>$,Pi:()=>f,T9:()=>u,VR:()=>_,b6:()=>d,mR:()=>g,nv:()=>l,s2:()=>s,vc:()=>n,xZ:()=>o,y1:()=>m});var i=a(4775);function n(e){return e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+" "+r(e.getHours())+":"+r(e.getMinutes())+":00"}function r(e){return(e<10?"0":"")+e}function s(e){return e.item_variant.item_name+"'s "+e.item_variant.color_name}function o(e){var t=[];return e.length>0&&Object.keys(e).map((function(a){t.push(e[a].id)})),t}function c(e){var t=e-1;return 0==t?1:t}function l(e){return 1==e.create||1==e.read||1==e.update||1==e.delete}function u(e){return 0==e.create&&0==e.read&&0==e.update&&0==e.delete}function p(e){switch(e.slice(-1)){case"y":return e.slice(0,-1)+"ies";case"h":case"x":return e+"es";default:return e+"s"}}function d(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;switch(e.currentPage=t,i){case null:e.search=null,void 0!==e.$refs.deleteAll&&(e.$refs.searchModal.searchData=null,e.$refs.deleteAll.$el.checked=!1);var n=p(a),r=e.$route.name==a?n:"trash_"+n;return r+"?page=";case"search":e.search=e.$refs.searchModal.searchData;var s=e.$route.name==a?a+"_search":a+"_trash_search";return s+"?search="}}function h(e,t){e.map((function(e){e.$el.checked=t,e.$el.dispatchEvent(new Event("change"))}))}function m(e,t,a,i){switch(e){case!0:a.includes(t.id)||a.push(t.id),i.includes(t)||i.push(t);break;case!1:g(a,t.id),g(i,t)}}function f(e){e.length=0}function g(e,t){var a=e.indexOf(t);a>-1&&e.splice(a,1)}function v(e,t,a){window.axios.get("check_permission/"+e+"/"+t).then((function(e){"Loading"==e.data.message?(0,i.eQ)(a):a.actions[t]=!0})).catch((function(e){_(e,a)}))}function w(e,t,a){switch(e.name){case a:t.push("/admin/"+a+"_bin"),e.name=a+"_bin";break;case a+"_bin":t.push("/admin/"+a),e.name=a}}function _(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.response)switch(e.response.status){case 401:t.$swal("Unauthenticated","You are not login","error"),setTimeout((function(){window.location.href="/admin/login"}),2e3);break;case 403:t.actions[a]=!1,t.errors&&(t.errors.error_status=403,t.errors.error_title="Permission Denied",t.errors.error_description="You are not allowed to "+a+" "+t.current);break;case 404:t.actions[a]=!1,t.errors.error_status=404,t.errors.error_title="Page Not Found",t.errors.error_description="You are in the wrong page"}}function $(e){return e[0].toLowerCase()+e.substring(1)}},7007:(e,t,a)=>{a.d(t,{Z:()=>o});var i=a(821),n={type:"file",name:"multiple"};var r=a(681);const s={data:function(){return{array:[],picArray:[],actions:{delete:""}}},props:{pics:{type:Array},multiple:{type:Boolean,default:!1},storage_path:{type:String,default:""},delete_path:{type:String,default:""},delete_all_path:{type:String,default:""}},watch:{pics:{deep:!0,handler:function(){var e=this,t=this.$props.pics;this.picArray.length=0,this.array.length=0,t.length>0&&this.addPics(t,e),this.changeFileInput(e),$(e.$el).on("fileclear",(function(){var t=this;e.array.length>0&&($(e.$el).fileinput("refresh",{initialPreview:[],initialPreviewAsData:!0,initialPreviewConfig:[],theme:"fa",overwriteInitial:!0,maxFileSize:22048,maxFilesNum:10,allowedFileExtensions:["jpg","gif","png","jpeg","webp"]}),window.axios.delete(e.$props.delete_all_path+e.$route.params.id).then((function(e){console.log(e.data.message)})).catch((function(e){(0,r.VR)(e,t,"delete")}))),e.array=[],e.picArray=[],e.$emit("removed")}))}}},methods:{changeFileInput:function(e){$(e.$el).fileinput("destroy"),$(e.$el).fileinput({initialPreview:e.picArray,initialPreviewAsData:!0,initialPreviewConfig:e.array,theme:"fa",overwriteInitial:1!=e.$props.multiple,maxFileSize:22048,maxFilesNum:10,allowedFileExtensions:["jpg","gif","png","jpeg","webp"]})},addPics:function(e,t){var a=window.location.pathname.substring(1);e.map((function(e){var i=window.location.href.replace(a,t.$props.storage_path+e.filename);t.picArray.push(i),t.array.push({caption:e.filename,width:"35px",url:window.location.href.replace(a,t.$props.delete_path+e.id),key:e.id,downloadURL:i})}))},checkExtension:function(e){switch(e.substring(e.lastIndexOf(".")+1)){case"pdf":return"pdf";case"jpg":case"jpeg":case"png":case"webp":case"gif":return"image";case"webm":case"mkv":case"flv":case"vob":case"ogv":case"ogg":case"drc":case"gif":case"gifv":case"mng":case"avi":case"MTS":case"M2TS":case"mov":case"qt":case"wmv":return"movie";default:return"object"}}},mounted:function(){var e=this;this.$props.multiple&&$(e.$el).attr("multiple",!0),isNaN(e.$route.params.id)&&$(e.$el).fileinput({initialPreviewAsData:!0,theme:"fa",overwriteInitial:!0,maxFileSize:22048,maxFilesNum:10,allowedFileExtensions:["jpg","gif","png","jpeg","webp"]})}};const o=(0,a(3744).Z)(s,[["render",function(e,t,a,r,s,o){return(0,i.wg)(),(0,i.iD)("input",n)}]])},397:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var i=a(821),n={class:"modal-content"},r=(0,i._)("div",{class:"modal-header"},[(0,i._)("h4",{class:"modal-title"},"Images Upload")],-1),s={class:"modal-body"},o={class:"modal-footer"},c=(0,i._)("i",{class:"ion ion-upload"},null,-1);var l=a(681);const u={components:{File:a(7007).Z},data:function(){return{pics:[],formData:new FormData}},mounted:function(){var e=this,t=this.$route.params.id;window.axios.get("item_variant_images/"+t).then((function(t){e.pics=t.data.images})).catch((function(t){(0,l.VR)(t,e,"read")}))},methods:{removePics:function(){this.pics=[]},setPic:function(e){var t=this;this.formData.getAll("pics[]").length>0&&this.formData.delete("pics[]"),Array.from(e.target.files).forEach((function(e){t.formData.append("pics[]",e)}))},uploadPics:function(){var e=this;window.axios.post("upload_item_variant_images/"+this.$route.params.id,this.formData).then((function(t){"Loading"==t.data.message?showSwalLoading(e):(e.$swal("Success",t.data.message,"success"),e.pics=t.data.images)})).catch((function(t){(0,l.VR)(t,e,"read")}))}}};const p=(0,a(3744).Z)(u,[["render",function(e,t,a,l,u,p){var d=(0,i.up)("File");return(0,i.wg)(),(0,i.iD)(i.HY,null,[((0,i.wg)(),(0,i.j4)((0,i.LL)("style"),null,{default:(0,i.w5)((function(){return[(0,i.Uk)(" .modal-dialog-person { width: 80% !important; height: 100% !important; padding: 0 !important; max-width: none !important; } .fileinput-upload-button, .kv-file-upload{ display: none !important; } ")]})),_:1})),(0,i._)("div",n,[r,(0,i._)("div",s,[(0,i.Wm)(d,{onChange:p.setPic,pics:u.pics,onRemoved:p.removePics,multiple:!0,storage_path:"image/item_images/",delete_path:"admin_api/item_image_delete/",delete_all_path:"delete_item_images/"},null,8,["onChange","pics","onRemoved"])]),(0,i._)("div",o,[(0,i._)("button",{type:"button",class:"btn btn-primary",style:{"margin-right":"50%"},onClick:t[0]||(t[0]=function(){return p.uploadPics&&p.uploadPics.apply(p,arguments)})},[c,(0,i.Uk)(" Upload")])])])],64)}]])}}]);