"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3116],{681:(a,e,t)=>{t.d(e,{Lf:()=>_,Mg:()=>o,OT:()=>p,P9:()=>k,PD:()=>v,Pi:()=>h,T9:()=>u,VR:()=>w,b6:()=>g,mR:()=>f,nv:()=>c,s2:()=>r,vc:()=>s,xZ:()=>l,y1:()=>m});var n=t(4775);function s(a){return a.getFullYear()+"-"+i(a.getMonth()+1)+"-"+i(a.getDate())+" "+i(a.getHours())+":"+i(a.getMinutes())+":00"}function i(a){return(a<10?"0":"")+a}function r(a){return a.item_variant.item_name+"'s "+a.item_variant.color_name}function l(a){var e=[];return a.length>0&&Object.keys(a).map((function(t){e.push(a[t].id)})),e}function o(a){var e=a-1;return 0==e?1:e}function c(a){return 1==a.create||1==a.read||1==a.update||1==a.delete}function u(a){return 0==a.create&&0==a.read&&0==a.update&&0==a.delete}function d(a){switch(a.slice(-1)){case"y":return a.slice(0,-1)+"ies";case"h":case"x":return a+"es";default:return a+"s"}}function g(a,e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;switch(a.currentPage=e,n){case null:a.search=null,void 0!==a.$refs.deleteAll&&(a.$refs.searchModal.searchData=null,a.$refs.deleteAll.$el.checked=!1);var s=d(t),i=a.$route.name==t?s:"trash_"+s;return i+"?page=";case"search":a.search=a.$refs.searchModal.searchData;var r=a.$route.name==t?t+"_search":t+"_trash_search";return r+"?search="}}function p(a,e){a.map((function(a){a.$el.checked=e,a.$el.dispatchEvent(new Event("change"))}))}function m(a,e,t,n){switch(a){case!0:t.includes(e.id)||t.push(e.id),n.includes(e)||n.push(e);break;case!1:f(t,e.id),f(n,e)}}function h(a){a.length=0}function f(a,e){var t=a.indexOf(e);t>-1&&a.splice(t,1)}function _(a,e,t){window.axios.get("check_permission/"+a+"/"+e).then((function(a){"Loading"==a.data.message?(0,n.e)(t):t.actions[e]=!0})).catch((function(a){w(a,t)}))}function k(a,e,t){switch(a.name){case t:e.push("/admin/"+t+"_bin"),a.name=t+"_bin";break;case t+"_bin":e.push("/admin/"+t),a.name=t}}function w(a,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(a.response)switch(a.response.status){case 401:e.$swal("Unauthenticated","You are not login","error"),setTimeout((function(){window.location.href="/admin/login"}),2e3);break;case 403:e.actions[t]=!1,e.errors&&(e.errors.error_status=403,e.errors.error_title="Permission Denied",e.errors.error_description="You are not allowed to "+t+" "+e.current);break;case 404:e.actions[t]=!1,e.errors.error_status=404,e.errors.error_title="Page Not Found",e.errors.error_description="You are in the wrong page"}}function v(a){return a[0].toLowerCase()+a.substring(1)}},4775:(a,e,t)=>{function n(a){a.$swal({title:"Now loading",html:'<div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div>',allowEscapeKey:!1,allowOutsideClick:!1,timer:2e3,onOpen:function(){swal.showLoading()}}).then((function(){}),(function(e){"timer"===e&&a.$swal.close}))}t.d(e,{e:()=>n})},4843:(a,e,t)=>{t.d(e,{Z:()=>f});var n=t(821),s={class:"content-header"},i={class:"container-fluid"},r={class:"row mb-2"},l={class:"col-sm-6"},o={class:"m-0"},c={class:"col-sm-6"},u={class:"breadcrumb float-sm-right"},d={class:"breadcrumb-item"},g=(0,n.Uk)("Home"),p={class:"breadcrumb-item"},m={key:0,class:"breadcrumb-item active"};const h={name:"ContentHeader",props:{header:{type:String},back_links:{type:Array}}};const f=(0,t(3744).Z)(h,[["render",function(a,e,t,h,f,_){var k=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",i,[(0,n._)("div",r,[(0,n._)("div",l,[(0,n._)("h1",o,(0,n.zw)(t.header),1)]),(0,n._)("div",c,[(0,n._)("ol",u,[(0,n._)("li",d,[(0,n.Wm)(k,{to:"/admin/dashboard"},{default:(0,n.w5)((function(){return[g]})),_:1})]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.back_links,(function(a){return(0,n.wg)(),(0,n.iD)("li",p,[(0,n.Wm)(k,{to:a.route},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,n.zw)(a.title),1)]})),_:2},1032,["to"])])})),256)),"Dashboard"!==t.header?((0,n.wg)(),(0,n.iD)("li",m,(0,n.zw)(t.header),1)):(0,n.kq)("",!0)])])])])])}]])},7116:(a,e,t)=>{t.d(e,{Z:()=>c});var n=t(821),s={class:"error-page"},i=(0,n._)("h2",{class:"headline text-warning"},"404",-1),r={class:"error-content"},l=(0,n._)("i",{class:"fas fa-exclamation-triangle text-warning"},null,-1);const o={props:{httpStatus:{type:Number},title:{type:String},description:{type:String}}};const c=(0,t(3744).Z)(o,[["render",function(a,e,t,o,c,u){return(0,n.wg)(),(0,n.iD)("div",s,[i,(0,n._)("div",r,[(0,n._)("h3",null,[l,(0,n.Uk)((0,n.zw)(t.title),1)]),(0,n._)("p",null,(0,n.zw)(t.description),1)])])}]])},3116:(a,e,t)=>{t.r(e),t.d(e,{default:()=>P});var n=t(821),s={class:"content"},i={class:"container-fluid"},r={key:0,class:"row"},l={class:"col-12"},o={class:"card"},c={class:"card-header row"},u={key:0,class:"card-tools col-8 mt-1"},d={class:"input-group"},g=(0,n._)("div",{class:"input-group-append"},[(0,n._)("button",{type:"submit",class:"btn btn-default"},[(0,n._)("i",{class:"fas fa-search"})])],-1),p={class:"card-body table-responsive p-0"},m={class:"table table-hover text-nowrap"},h=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"Action"),(0,n._)("th",null,"Admin Name"),(0,n._)("th",null,"Admin Email")])],-1),f={class:"card-footer clearfix"},_={key:1,class:"card card-default"};var k=t(9027),w=t(4843),v=t(7116),b=t(681),D=t(4775);const y={components:{Pagination:k.Z,ContentHeader:w.Z,Error:v.Z},data:function(){return{content:"Transactions of "+this.$route.params.name+" "+this.$route.params.model,transactions:{},search:null,currentPage:1,actions:{read:""}}},mounted:function(){this.getTransactions(1)},methods:{getLink:function(a){var e=(0,b.PD)(a);return"0"!==this.$route.params.variant_id?"/admin/"+e.replace(/([A-Z])/g,"/$1").trim().toLowerCase()+"/"+this.$route.params.variant_id:"/admin/"+e.replace(/([A-Z])/g,"_$1").trim().toLowerCase()},getTransactions:function(){var a=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=e,window.axios.get("transactions/"+this.$route.params.model+"/"+this.$route.params.model_id+"?page="+e).then((function(e){"Loading"==e.data.message?(0,D.e)(a):(a.transactions=e.data.transactions,a.actions.read=!0)})).catch((function(e){(0,b.VR)(e,a,"read")}))},searchTransactions:function(a){var e=this;this.currentPage=a,window.axios.get("transaction_search/"+this.$route.params.model+"/"+this.$route.params.model_id+"?search="+this.search+"&page="+a).then((function(a){"Loading"==a.data.message?(0,D.e)(e):(e.transactions=a.data.transactions,e.actions.read=!0)})).catch((function(a){(0,b.VR)(a,e,"read")}))}}};const P=(0,t(3744).Z)(y,[["render",function(a,e,t,k,w,v){var b=(0,n.up)("ContentHeader"),D=(0,n.up)("Pagination"),y=(0,n.up)("Error");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(b,{header:w.content,back_links:[{route:v.getLink(this.$route.params.model),title:this.$route.params.model}]},null,8,["header","back_links"]),(0,n._)("section",s,[(0,n._)("div",i,[1==w.actions.read?((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",l,[(0,n._)("div",o,[(0,n._)("div",c,[w.actions.read?((0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("form",{onSubmit:e[1]||(e[1]=(0,n.iM)((function(a){return v.searchTransactions(1)}),["prevent"]))},[(0,n._)("div",d,[(0,n.wy)((0,n._)("input",{type:"text",name:"table_search","onUpdate:modelValue":e[0]||(e[0]=function(a){return w.search=a}),class:"form-control float-right",placeholder:"Search"},null,512),[[n.nr,w.search]]),g])],32)])):(0,n.kq)("",!0)]),(0,n._)("div",p,[(0,n._)("table",m,[h,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(w.transactions.data,(function(a){return(0,n.wg)(),(0,n.iD)("tr",{key:a.id},[(0,n._)("td",null,(0,n.zw)(a.action),1),(0,n._)("td",null,(0,n.zw)(a.admin_name),1),(0,n._)("td",null,(0,n.zw)(a.admin_email),1)])})),128))])])]),(0,n._)("div",f,[(0,n.Wm)(D,{page:w.currentPage,lastPage:w.transactions.last_page,onGetData:v.getTransactions,onSearchData:v.searchTransactions,search:w.search,from:w.transactions.from,to:w.transactions.to,total:w.transactions.total},null,8,["page","lastPage","onGetData","onSearchData","search","from","to","total"])])])])])):0==w.actions.read?((0,n.wg)(),(0,n.iD)("div",_,[(0,n.Wm)(y,{httpStatus:403,title:"Permission Denied",description:"You are not allowed to view transactions"})])):(0,n.kq)("",!0)])])],64)}]])},9027:(a,e,t)=>{t.d(e,{Z:()=>L});var n=t(821),s={"aria-label":"Page navigation"},i={key:0,class:"page-item"},r=[(0,n._)("span",{"aria-hidden":"true"},"«",-1),(0,n._)("span",{class:"sr-only"},"Previous",-1)],l={class:"page-item"},o=["onClick"],c=(0,n._)("li",{class:"page-item disabled"},[(0,n._)("a",{class:"page-link"},"...")],-1),u={key:0,class:"page-item active"},d={class:"page-link"},g={key:1,class:"page-item"},p=["onClick"],m={key:0,class:"page-item active"},h={class:"page-link"},f={key:1,class:"page-item"},_=["onClick"],k={class:"page-item"},w=["onClick"],v={class:"page-item active"},b={class:"page-link"},D={class:"page-item"},y=["onClick"],P={class:"page-item"},C=["onClick"],$={key:7,class:"page-item"},z={key:0,class:"page-item disabled"},H=[(0,n._)("a",{class:"page-link"},"...",-1)],Y={class:"page-item"},V={class:"page-item"},q={key:9,class:"page-item"},x=[(0,n._)("span",{"aria-hidden":"true"},"»",-1),(0,n._)("span",{class:"sr-only"},"Next",-1)];const Z={name:"Pagination",emits:["getData","searchData"],props:{ulClass:{type:String,default:"pagination pagination-sm pg-blue"},lastPage:{type:Number},page:{type:Number,default:1},from:{type:Number,default:1},to:{type:Number},total:{type:Number},search:{type:String}},methods:{updateValue:function(a){this.$emit(this.$props.search?"searchData":"getData",a)}}};const L=(0,t(3744).Z)(Z,[["render",function(a,e,t,Z,L,N){return(0,n.wg)(),(0,n.iD)("nav",s,[(0,n._)("ul",{class:(0,n.C_)(t.ulClass)},[t.page>1?((0,n.wg)(),(0,n.iD)("li",i,[(0,n._)("a",{class:"page-link","aria-label":"Previous",onClick:e[0]||(e[0]=function(a){return N.updateValue(t.page-1)})},r)])):(0,n.kq)("",!0),t.lastPage>10&&t.page>=8?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(2,(function(a){return(0,n._)("li",l,[(0,n._)("a",{class:"page-link",onClick:function(e){return N.updateValue(a)}},(0,n.zw)(a),9,o)])})),64)),c],64)):(0,n.kq)("",!0),t.lastPage<=10?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:2},(0,n.Ko)(t.lastPage,(function(a){return(0,n.wg)(),(0,n.iD)(n.HY,null,[a==t.page?((0,n.wg)(),(0,n.iD)("li",u,[(0,n._)("a",d,(0,n.zw)(a),1)])):((0,n.wg)(),(0,n.iD)("li",g,[(0,n._)("a",{class:"page-link",onClick:function(e){return N.updateValue(a)}},(0,n.zw)(a),9,p)]))],64)})),256)):(0,n.kq)("",!0),t.page<8&&t.lastPage>10?((0,n.wg)(),(0,n.iD)(n.HY,{key:3},(0,n.Ko)(10,(function(a){return(0,n.wg)(),(0,n.iD)(n.HY,null,[a==t.page?((0,n.wg)(),(0,n.iD)("li",m,[(0,n._)("a",h,(0,n.zw)(a),1)])):((0,n.wg)(),(0,n.iD)("li",f,[(0,n._)("a",{class:"page-link",onClick:function(e){return N.updateValue(a)}},(0,n.zw)(a),9,_)]))],64)})),64)):(0,n.kq)("",!0),t.page>=8&&t.lastPage>10?((0,n.wg)(),(0,n.iD)(n.HY,{key:4},[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)([3,2,1],(function(a){return(0,n._)("li",k,[(0,n._)("a",{class:"page-link",onClick:function(e){return N.updateValue(t.page-a)}},(0,n.zw)(t.page-a),9,w)])})),64)),(0,n._)("li",v,[(0,n._)("a",b,(0,n.zw)(t.page),1)])],64)):(0,n.kq)("",!0),t.page>=8&&t.page+3<t.lastPage-1&&t.lastPage>10?((0,n.wg)(),(0,n.iD)(n.HY,{key:5},(0,n.Ko)([1,2,3],(function(a){return(0,n._)("li",D,[(0,n._)("a",{class:"page-link",onClick:function(e){return N.updateValue(t.page+a)}},(0,n.zw)(t.page+a),9,y)])})),64)):(0,n.kq)("",!0),t.page+2==t.lastPage-2&&t.lastPage>10?((0,n.wg)(),(0,n.iD)(n.HY,{key:6},(0,n.Ko)([1,2],(function(a){return(0,n._)("li",P,[(0,n._)("a",{class:"page-link",onClick:function(e){return N.updateValue(t.page+a)}},(0,n.zw)(t.page+a),9,C)])})),64)):(0,n.kq)("",!0),(t.page+1==t.lastPage-2||t.page+1==t.lastPage)&&t.lastPage>10?((0,n.wg)(),(0,n.iD)("li",$,[(0,n._)("a",{class:"page-link",onClick:e[1]||(e[1]=function(a){return N.updateValue(t.page+1)})},(0,n.zw)(t.page+1),1)])):(0,n.kq)("",!0),t.page<t.lastPage-1&&t.lastPage>10?((0,n.wg)(),(0,n.iD)(n.HY,{key:8},[t.lastPage-5>t.page?((0,n.wg)(),(0,n.iD)("li",z,H)):(0,n.kq)("",!0),(0,n._)("li",Y,[(0,n._)("a",{class:"page-link",onClick:e[2]||(e[2]=function(a){return N.updateValue(t.lastPage-1)})},(0,n.zw)(t.lastPage-1),1)]),(0,n._)("li",V,[(0,n._)("a",{class:"page-link",onClick:e[3]||(e[3]=function(a){return N.updateValue(t.lastPage)})},(0,n.zw)(t.lastPage),1)])],64)):(0,n.kq)("",!0),t.lastPage>1&&t.page+1<=t.lastPage?((0,n.wg)(),(0,n.iD)("li",q,[(0,n._)("a",{class:"page-link","aria-label":"Next",onClick:e[4]||(e[4]=function(a){return N.updateValue(t.page+1)})},x)])):(0,n.kq)("",!0)],2)])}]])}}]);